{{header}}
{{menu_panel}}
<main class="my-plan__main">
    <div class="my-plan__title-container">
        <h1 class="my-plan__title">{{Editar perfil}}</h1>
    </div>
    <article>
        <section class="panel-user-data__main-container">
            <section class="panel-user-data__main-container__row">
                <section class="panel-user-data__main-container__column">
                    <h2 class="panel-user-data__main-container__title">{{Dados pessoais}}</h2>
                    <p>{{Dados básicos para acesso à conta e personalização do sistema.}}</p>
                </section>
                <section class="panel-user-data-container panel-user-data__main-container__column">
                    <div class="input-default floating-input">
                        <input oninput="js.index.formatToLetter(this); js.index.makeSaveUserPersonalDataAvailable();" type="text" name="user_name" id="user_name_input" value="{{user_name_val}}" class="floating" maxlength="50" minlength="1" required placeholder=" ">
                        <label for="user_name" class="floating-label">{{Nome completo}}</label>
                    </div>
                    <div class="input-default focus floating-input">
                        <input type="email" name="user_email" id="user_email_input" value="{{user_email_val}}" class="floating" minlength="3" maxlength="255" required placeholder=" ">
                        <label for="user_email" class="floating-label">E-mail</label>
                    </div>
                    <div class="input-default floating-input">
                        <section class="input-default country-flag-container">
                            <select onchange="js.index.updateUserPhoneInputWithCountry(); js.index.makeSaveUserPersonalDataAvailable();" name="user_country" id="user_country_select" value="{{user_country_val}}" class="floating" required autocomplete="off">
                                {{html_user_country_options}}
                            </select>
                        </section>
                    </div>
                    <div class="input-default floating-input">
                        <section class="input-default-icon focus" id="user_phone_div">
                            <input type="text" name="user_country_code" id="user_country_code_input" class="input-country-code" value="+{{user_country_code_val}}" placeholder=" " readonly>
                            <div class="floating-input">
                                <input oninput="js.index.formatToPhoneNumber(this); js.index.makeSaveUserPersonalDataAvailable();" type="text" name="user_phone" id="user_phone_input" value="{{user_phone_val}}" class="floating" placeholder=" ">
                                <label for="user-phone">{{Digite seu telefone}}</label>
                            </div>
                        </section>
                    </div>
                </section>
            </section>
            <span class="error" style="" id="personal_data_error_msg_span">
            </span>
            <section class="panel-user-data__main-container__button-container">
                <button onclick="js.index.saveUserPersonalData()" type="submit" id="save_personal_data_button" disabled>
                    {{Salvar alterações}}
                </button>
            </section>
        </section>

        <section class="panel-user-data__main-container">
            <article>
                <section class="panel-user-data__main-container__row">
                    <section class="panel-user-data__main-container__column">
                        <h2 class="panel-user-data__main-container__title">{{Dados de faturamento}}</h2>
                        <p>{{Dados para emissão de notas-fiscais, invoices e boletos.}}</p>
                    </section>
                    <section class="panel-user-data-container panel-user-data__main-container__column">
                        <div class="panel-user-billing-data-container">
                            <div class="panel-user-data__user-client-container">
                                <a href="/panel_user_data/?user_client_type=company">{{Pessoa jurídica}}</a>
                                <span class="active">{{Pessoa física}}</span>
                            </div>
                        </div>
                        <div class="panel-user-data__cpf-cep-container">
                            <div class="input-default floating-input cpf-field">
                                <input oninput="js.index.formatToCPF(this); js.index.makeSaveUserCPFDataAvailable();" type="text" name="user_cpf" id="user_cpf_input" value="{{user_cpf_val}}" class="floating" minlength="14" maxlength="14" placeholder=" ">
                                <label for="user_cpf" class="floating-label">{{CPF}}</label>
                            </div>
                            <div class="input-default floating-input cep-field">
                                <input oninput="js.index.formatToZIP(this); js.index.showUserPhysicalAddressData(); js.index.makeSaveUserCPFDataAvailable();" type="text" name="user_zip_code" id="user_zip_code_input" value="{{user_zip_code_val}}" class="floating" minlength="9" maxlength="9" placeholder=" ">
                                <label for="user_zip_code" class="floating-label">{{CEP}}</label>
                            </div>
                        </div>
                        <div class="panel-user-data__cpf-cep-container" >
                            <div class="input-default focus floating-input state-field">
                                <input type="text" name="user_state" id="user_state_input" value="{{user_state_val}}" class="floating" readonly required placeholder=" ">
                                <label for="user_state" class="floating-label">{{Estado}}</label>
                            </div>
                            <div class="input-default focus floating-input city-field">
                                <input type="text" name="user_city" id="user_city_input" value="{{user_city_val}}" class="floating" readonly required placeholder=" ">
                                <label for="user_city" class="floating-label">{{Cidade}}</label>
                            </div>
                        </div>
                        <input hidden name="user_city_code" id="user_city_code_input" value="{{user_city_code_val}}" readonly>
                        <div class="input-default focus floating-input">
                            <input type="text" name="user_neighborhood" id="user_neighborhood_input" value="{{user_neighborhood_val}}" class="floating" readonly required placeholder=" ">
                            <label for="user_neighborhood" class="floating-label">{{Bairro}}</label>
                        </div>
                        <div class="input-default focus floating-input">
                            <input type="text" name="user_street" id="user_street_input" value="{{user_street_val}}" class="floating" readonly required placeholder=" ">
                            <label for="user_street" class="floating-label">{{Rua}}</label>
                        </div>
                        <div class="panel-user-data__cpf-cep-container">
                            <div class="input-default floating-input number-field">
                                <input oninput="js.index.formatToNumbers(this); js.index.makeSaveUserCPFDataAvailable();" type="text" name="user_street_number" id="user_street_number_input" value="{{user_street_number_val}}" class="floating" oninput="js.index.formatToNumber(this)" placeholder=" ">
                                <label for="user_street_number" class="floating-label">{{Número}}</label>
                            </div>
                            <div class="input-default floating-input complement-field">
                                <input oninput="js.index.makeSaveUserCPFDataAvailable();" type="text" name="user_complement" id="user_complement_input" class="floating" value="{{user_complement_val}}" placeholder=" ">
                                <label for="user_complement" class="floating-label">{{Complemento}}</label>
                            </div>
                        </div>
                    </section>
                </section>
                <span class="error" style="{{error_msg_visibility_val}}" id="cpf_data_error_msg_span">
                    {{error_msg_val}}
                </span>
                <section class="panel-user-data__main-container__button-container">
                    <button onclick="js.index.saveUserCPFData()" type="submit" id="save_cpf_data_button" disabled>
                        {{Salvar alterações}}
                    </button>
                </section>
            </article>
        </section>

        <section class="panel-user-data__main-container">
            <article>
                <section class="panel-user-data__main-container__row">
                    <section class="panel-user-data__main-container__column">
                        <h2 class="panel-user-data__main-container__title">{{Segurança e Privacidade}}</h2>
                        <p>{{Informações de segurança e opções de privacidade}}.</p>
                    </section>
                    <section class="panel-user-data-container panel-user-data__main-container__column">
                        <div class="create-account__input-container floating-input">
                            <input type="password" name="user_current_password" value="{{user_current_password_val}}" id="user_current_password_input" placeholder=" " required autocapitalize="off" autocorrect="off" minlength="8" maxlength="500">
                            <label for="user_current_password_input">{{Senha atual}}</label>
                            <button type="button" onclick="js.index.togglePasswordVisibility(this)" aria-controls="user_current_password_input" aria-label="{{Exibir senha}}" title="{{Exibir senha}}">
                                <img src="{{cdn_val}}/assets/icons/visibility_off.svg" alt="" width="24" height="24">
                            </button>
                        </div>
                        <p class="error none">{{Deve conter apenas letras}}</p>

                        <div class="create-account__input-container floating-input">
                            <input type="password" name="user_password" value="{{user_password_val}}" id="user_password_input" placeholder=" " required autocapitalize="off" autocorrect="off" minlength="8" maxlength="500">
                            <label for="user_password_input">{{Nova senha}}</label>
                            <button type="button" onclick="js.index.togglePasswordVisibility(this)" aria-controls="user_password_input" aria-label="{{Exibir senha}}" title="{{Exibir senha}}">
                                <img src="{{cdn_val}}/assets/icons/visibility_off.svg" alt="" width="24" height="24">
                            </button>
                        </div>
                        <p class="error none">{{Senha inválida}}</p>
                    </section>
                </section>
                <span class="error" style="{{error_msg_visibility_val}}" id="error_msg">
                    {{error_msg_val}}
                </span>
                <section class="panel-user-data__main-container__button-container">
                    <button type="submit" class="black ghost" onclick="js.index.openModalDeleteUserAccount();">
                        Apagar minha conta
                    </button>
                    <button type="submit" disabled>
                        Salvar alterações
                    </button>
                </section>
            </article>
        </section>

        <section class="panel-user-data__main-container">
            <article>
                <section class="panel-user-data__main-container__row panel-user-data__main-container__row--image">
                    <section class="panel-user-data__main-container__column">
                        <h2 class="panel-user-data__main-container__title">Imagem de perfil</h2>
                        <p>Imagem representando você ou sua empresa. Imagens quadradas funcionam melhor.</p>
                    </section>
                    <section class="panel-user-data__main-container__column panel-user-data__file-image-container">
                        <img id="user_thumb_img" class="panel-user-data__file-image" src="{{user_thumb_url_val}}" width="127" height="127" alt="" />
                        <div class="upload-file-container {{panel_user_data_modal_visibility_val}}">
                            <label class="upload-file-label panel-user-data__file-label" for="upload_user_thumb_input" aria-label="{{Adicionar foto de perfil}}">
                                <img src="{{cdn_val}}/assets/icons/upload_simple.svg" alt="" width="32" height="32">
                                <p>Arraste ou clique aqui para enviar uma nova imagem de perfil. Formato JPG ou PNG.</p>
                            </label>
                            <input onchange="js.index.uploadUserThumb(this)" class="" type="file" name="upload_user_thumb_input" id="upload_user_thumb_input" accept=".jpg">
                            <span id="update_user_thumb_error_msg_span"></span>
                        </div>
                    </section>
                </section>
                <span class="error" style="{{error_msg_visibility_val}}" id="error_msg">
                    {{error_msg_val}}
                </span>
                <section class="panel-user-data__main-container__button-container">
                    <button type="submit" class="black ghost" onclick="js.index.openModalDeleteUserImage();">
                        Apagar imagem de perfil
                    </button>
                    <button type="submit" disabled>
                        Salvar alterações
                    </button>
                </section>
            </article>
        </section>
    </article>
    {{html_modal_loader_spinner}}
</main>
{{footer}}

<script>
    window.onload = async function () {
        var user_country_select = document.getElementById("user_country_select");
        var user_cpf_input = document.getElementById("user_cpf_input")
        if (user_country_select.value == "BR"){
            js.index.formatToPhoneNumber(document.getElementById("user_phone_input"));
        };
        js.index.makeSaveUserPersonalDataAvailable();

        js.index.formatToCPF(user_cpf_input);
        js.index.formatToZIP(document.getElementById("user_zip_code_input"));
        js.index.formatToNumbers(document.getElementById("user_street_number_input"))
        js.index.makeSaveUserCPFDataAvailable();


    };
</script>