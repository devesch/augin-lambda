{{header}}
{{menu_panel}}
<script src="https://js.stripe.com/v3/"></script>

<style>
    /* Variables */
    * {
        box-sizing: border-box;
    }

    body {
        justify-content: center;
        align-content: center;
        height: 100vh;
        width: 100vw;
    }

    .stripe form {
        min-width: 500px;
        align-self: flex-start;
        box-shadow: 0px 0px 0px 0.5px rgba(50, 50, 93, 0.1),
            0px 2px 5px 0px rgba(50, 50, 93, 0.1), 0px 1px 1.5px 0px rgba(0, 0, 0, 0.07);
        border-radius: 7px;
        padding: 40px;
        flex: auto;
        min-height: 100%;
        align-self: stretch;
        display: flex;
        flex-direction: column;
    }

    .hidden {
        display: none;
    }

    #payment-message {
        color: rgb(105, 115, 134);
        font-size: 16px;
        line-height: 20px;
        padding-top: 12px;
        text-align: center;
    }

    #payment-element {
        margin-bottom: 24px;
    }

    .stripe .button-container {
        display: flex;
        flex-direction: column;
        -ms-flex-direction: column;
        flex-grow: 1;
        justify-content: flex-end;
    }

    /* Buttons and links */
    /* button {
        background: var(--color-neutral-700);
        font-family: Arial, sans-serif;
        color: #ffffff;
        border-radius: 4px;
        border: 0;
        padding: 12px 16px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        display: block;
        transition: all 0.2s ease;
        box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);
        width: 100%;
    } */

    /* button:hover {
        filter: contrast(155%);
    }

    button:disabled {
        opacity: 0.5;
        cursor: default;
    } */

    /* spinner/processing state, errors */
    .stripe .spinner,
    .stripe .spinner:before,
    .stripe .spinner:after {
        border-radius: 50%;
    }

    .stripe .spinner {
        color: #ffffff;
        font-size: 22px;
        text-indent: -99999px;
        margin: 0px auto;
        position: relative;
        width: 20px;
        height: 20px;
        box-shadow: inset 0 0 0 2px;
        -webkit-transform: translateZ(0);
        -ms-transform: translateZ(0);
        transform: translateZ(0);
    }

    .stripe .spinner:before,
    .stripe .spinner:after {
        position: absolute;
        content: "";
    }

    .stripe .spinner:before {
        width: 10.4px;
        height: 20.4px;
        background: #5469d4;
        border-radius: 20.4px 0 0 20.4px;
        top: -0.2px;
        left: -0.2px;
        -webkit-transform-origin: 10.4px 10.2px;
        transform-origin: 10.4px 10.2px;
        -webkit-animation: loading 2s infinite ease 1.5s;
        animation: loading 2s infinite ease 1.5s;
    }

    .stripe .spinner:after {
        width: 10.4px;
        height: 10.2px;
        background: #5469d4;
        border-radius: 0 10.2px 10.2px 0;
        top: -0.1px;
        left: 10.2px;
        -webkit-transform-origin: 0px 10.2px;
        transform-origin: 0px 10.2px;
        -webkit-animation: loading 2s infinite ease;
        animation: loading 2s infinite ease;
    }

    .stripe .whatsapp-link {
        color: var(--color-sec);
        transition: color .3s ease;
    }

    @-webkit-keyframes loading {
        0% {
            -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    @keyframes loading {
        0% {
            -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    @media only screen and (max-width: 800px) {
        form {
            width: 100%;
            min-width: initial;
        }
    }
</style>
<main class="my-plan__main checkout-container">
    <div class="stripe">
        <form id="payment-form">
            <div id="box_payment_loader">
                <span id="our_loader" class="loader-spinner"></span>
            </div>
            <div id="link-authentication-element">
            </div>
            <div id="payment-element">
            </div>
            <button id="submit" style="display:none;">
                <div class="spinner hidden" id="spinner"></div>
                <span id="button-text">{{Pague Agora}}</span>
            </button>
            <div id="payment-message" class="hidden"></div>
            <div class="mt-2">
                {{Precisa de ajuda? Mande uma mensagem para nosso}} <a class='whatsapp-link' href='https://wa.me/5551999859355' target='_blank'>Whatsapp</a>.
            </div>
        </form>
    </div>

    <div class="summary-container">
        <div class="user-summary box">
            <div class="user-summary-row">
                <div class="user-summary-image-container">
                    <svg width="25" height="25" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                        <path d="M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"></path>
                    </svg>
                </div>
                <div class="user-summary-description-container">
                    <h3 class="mb-0">{{user_name_val}}</h3>
                    <strong>{{user_email_val}}</strong>
                </div>
            </div>
        </div>
        <div class="order-summary box">
            <div class="order-summary-row">
                <div class="order-summary-image-container">
                    <svg width="25" height="25" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                        <path d="M96 0C107.5 0 117.4 8.19 119.6 19.51L121.1 32H541.8C562.1 32 578.3 52.25 572.6 72.66L518.6 264.7C514.7 278.5 502.1 288 487.8 288H170.7L179.9 336H488C501.3 336 512 346.7 512 360C512 373.3 501.3 384 488 384H159.1C148.5 384 138.6 375.8 136.4 364.5L76.14 48H24C10.75 48 0 37.25 0 24C0 10.75 10.75 0 24 0H96zM128 464C128 437.5 149.5 416 176 416C202.5 416 224 437.5 224 464C224 490.5 202.5 512 176 512C149.5 512 128 490.5 128 464zM512 464C512 490.5 490.5 512 464 512C437.5 512 416 490.5 416 464C416 437.5 437.5 416 464 416C490.5 416 512 437.5 512 464z"></path>
                    </svg>
                </div>
                <div class="order-summary-description-container">
                    <h3>{{Resumo do pedido}}</h3>
                    <p><strong>{{plan_name_val}}</strong></p>
                    <div class="order-summary-price-container">
                        <hr />
                        <div class="flex-justify-space-between">
                            <p>{{Total}}</p>
                            <p>
                                <small>{{user_cart_currency_symbol}}</small>
                                <strong>{{plan_price_val}}</strong>
                                /<span class="lowercase">{{plan_recurrency_phrase_val}}</span>
                            </p>
                            <p><strong>{{plan_discounted_price_val}}</strong></p>
                            <p><strong>{{discount_value_val}}</strong></p>
                        </div>
                    </div>
                    <div>
                        <input hidden name="plan_id" id="plan_id_input" value="{{plan_id_val}}">
                        <input hidden name="plan_recurrency" id="plan_recurrency_input" value="{{plan_recurrency_val}}">
                        <input name="coupon_code" id="coupon_code_input" value="{{user_cart_coupon_code_val}}">
                        <button onclick="js.index.addCouponToUser()" name="add_coupon" id="add_coupon_button">{{Adicionar}}</button>
                        <label>{{Coupon}}</label>
                    </div>
                    <div class="link-container">
                        <a href="{{domain_name_url_val}}/checkout_upgrade_your_plan">{{Alterar plano}}</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="status-summary box status-summary-desktop" style="">
            <div class="status-summary-row">
                <div class="status-summary-image-container">
                    <svg width="25" height="25" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                        <path d="M512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H64C28.65 448 0 419.3 0 384V128C0 92.65 28.65 64 64 64H512zM272 192C263.2 192 256 199.2 256 208C256 216.8 263.2 224 272 224H496C504.8 224 512 216.8 512 208C512 199.2 504.8 192 496 192H272zM272 320H496C504.8 320 512 312.8 512 304C512 295.2 504.8 288 496 288H272C263.2 288 256 295.2 256 304C256 312.8 263.2 320 272 320zM164.1 160C164.1 148.9 155.1 139.9 143.1 139.9C132.9 139.9 123.9 148.9 123.9 160V166C118.3 167.2 112.1 168.9 108 171.1C93.06 177.9 80.07 190.5 76.91 208.8C75.14 219 76.08 228.9 80.32 237.8C84.47 246.6 91 252.8 97.63 257.3C109.2 265.2 124.5 269.8 136.2 273.3L138.4 273.9C152.4 278.2 161.8 281.3 167.7 285.6C170.2 287.4 171.1 288.8 171.4 289.7C171.8 290.5 172.4 292.3 171.7 296.3C171.1 299.8 169.2 302.8 163.7 305.1C157.6 307.7 147.7 309 134.9 307C128.9 306 118.2 302.4 108.7 299.2C106.5 298.4 104.3 297.7 102.3 297C91.84 293.5 80.51 299.2 77.02 309.7C73.53 320.2 79.2 331.5 89.68 334.1C90.89 335.4 92.39 335.9 94.11 336.5C101.1 339.2 114.4 343.4 123.9 345.6V352C123.9 363.1 132.9 372.1 143.1 372.1C155.1 372.1 164.1 363.1 164.1 352V346.5C169.4 345.5 174.6 343.1 179.4 341.9C195.2 335.2 207.8 322.2 211.1 303.2C212.9 292.8 212.1 282.8 208.1 273.7C204.2 264.7 197.9 258.1 191.2 253.3C179.1 244.4 162.9 239.6 150.8 235.9L149.1 235.7C135.8 231.4 126.2 228.4 120.1 224.2C117.5 222.4 116.7 221.2 116.5 220.7C116.3 220.3 115.7 219.1 116.3 215.7C116.7 213.7 118.2 210.4 124.5 207.6C130.1 204.7 140.9 203.1 153.1 204.1C157.5 205.7 171 208.3 174.9 209.3C185.5 212.2 196.5 205.8 199.3 195.1C202.2 184.5 195.8 173.5 185.1 170.7C180.7 169.5 170.7 167.5 164.1 166.3L164.1 160z"></path>
                    </svg>
                </div>
                <div class="status-summary-description-container">
                    <h3>{{Status do pedido}}</h3>
                    <p><span>{{Aguardando a confirmação do pagamento}}.</span></p>
                    
                </div>
            </div>
        </div>
    </div>
</main>
<span id="coupon_error_msg_span"></span>

<script>
    window.onload = async function () {
        let coupon_code_input = document.getElementById("coupon_code_input");
        if (coupon_code_input.value != "") {
            await js.index.checkIfCouponIsStillValid();
        }
        js.index.processStripeSubscriptionPayment('{{stripe_token_val}}', 'subscription', '{{plan_id_val}}', '{{plan_recurrency_val}}');
    };
</script>

{{footer}}